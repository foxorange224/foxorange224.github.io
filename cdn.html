<!DOCTYPE html>
<html>
<head>
    <title>CDN Test - FoxWeb</title>
    <style>
        body { font-family: Arial; padding: 20px; }
        .success { color: green; }
        .error { color: red; }
        .info { color: blue; }
    </style>
</head>
<body>
    <h1>ğŸ” Test de CDN - FoxWeb</h1>
    
    <div id="results">
        <h2>âœ… Vercel Edge Network Activada</h2>
        <p>Tu sitio ya estÃ¡ en la CDN global de Vercel.</p>
        
        <h3>ğŸŒ Localizaciones de Edge:</h3>
        <ul>
            <li>ğŸ‡ºğŸ‡¸ North America (iad1, sfo1)</li>
            <li>ğŸ‡ªğŸ‡º Europe (fra1, lhr1)</li>
            <li>ğŸ‡¸ğŸ‡¬ Asia (sin1)</li>
            <li>ğŸ‡¦ğŸ‡º Australia (syd1)</li>
        </ul>
        
        <h3>ğŸ“Š Headers de CDN:</h3>
        <pre id="headers">Cargando...</pre>
        
        <h3>âš¡ Test de Velocidad:</h3>
        <button onclick="runSpeedTest()">Ejecutar Test</button>
        <div id="speedTest"></div>
    </div>
    
    <script>
        // Obtener headers
        fetch('/')
            .then(res => {
                const headers = [];
                res.headers.forEach((value, key) => {
                    headers.push(`${key}: ${value}`);
                });
                document.getElementById('headers').textContent = headers.join('\n');
            });
        
        function runSpeedTest() {
            const start = performance.now();
            const testDiv = document.getElementById('speedTest');
            testDiv.innerHTML = '<p>â³ Probando CDN desde tu ubicaciÃ³n...</p>';
            
            // Test desde mÃºltiples ubicaciones simuladas
            const endpoints = [
                'https://foxweb.vercel.app/data.js',
                'https://foxweb.vercel.app/main',
                'https://i.imgur.com/qfsMx7V.png'
            ];
            
            let completed = 0;
            let totalTime = 0;
            
            endpoints.forEach(url => {
                const startTime = performance.now();
                fetch(url + '?t=' + Date.now())
                    .then(() => {
                        const time = performance.now() - startTime;
                        totalTime += time;
                        completed++;
                        
                        if (completed === endpoints.length) {
                            const avgTime = totalTime / endpoints.length;
                            const rating = avgTime < 500 ? 'âœ… Excelente' : 
                                         avgTime < 1000 ? 'âš ï¸ Aceptable' : 'âŒ Lento';
                            
                            testDiv.innerHTML = `
                                <p><strong>Resultado:</strong> ${rating}</p>
                                <p><strong>Tiempo promedio:</strong> ${avgTime.toFixed(0)}ms</p>
                                <p><strong>CDN activa:</strong> âœ… SÃ­</p>
                                <p><strong>Cache HIT:</strong> ${avgTime < 300 ? 'âœ… SÃ­' : 'âš ï¸ Primera carga'}</p>
                            `;
                        }
                    });
            });
        }
        
        // Ejecutar automÃ¡ticamente
        setTimeout(runSpeedTest, 1000);
    </script>
</body>
</html>